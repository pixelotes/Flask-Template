# --- Configuración de la App ---
image:
  repository: tu/imagen  # Cambia esto por tu imagen real
  pullPolicy: IfNotPresent
  tag: "latest"

service:
  type: ClusterIP
  port: 5000

# --- Base de Datos ---
database:
  # Opciones: "sqlite" (no recomendado para producción), "internal" (despliega pod postgres) o "external" (usa RDS/Aurora/Etc)
  type: sqlite

  # Internal se configura desde la ruta .Values.postgresql      
  
  # Solo se usa si type: external
  external:
    host: "mi-aurora-db.aws.com"
    port: 5432
    username: "admin"
    database: "fichador_prod"
    existingSecret:
      name: "secreto-kubernetes"
      key: "password"

  # Solo se usa si type: sqlite
  sqlite:
    persistence:
      enabled: true
      size: 1Gi
      storageClass: "" # Dejar vacío para usar la default

# --- Configuración PostgreSQL Interna (Bitnami Subchart) ---
# Se activa automáticamente si database.type es "internal" (ver lógica abajo no, se controla manual)
# Para usar externa, pon enabled: false
postgresql:
  enabled: false
  auth:
    username: usuario
    password: password
    database: bbdd
  # Persistencia de la BBDD interna (puedes desactivarla si quieres que sea efímera)
  primary:
    persistence:
      enabled: true
      size: 1Gi

# --- Exposición (Ingress vs Gateway API) ---
ingress:
  enabled: false
  className: "nginx"
  host: "flaskapp.local"
  tls: []
  #  - secretName: flaskapp-tls
  #    hosts:
  #      - flaskapp.local

gatewayApi:
  enabled: false
  gatewayName: "my-gateway"  # El nombre del Gateway existente en tu cluster
  namespace: "default"       # Namespace del Gateway
  hostname: "flaskapp.example.com"

# --- Configuración y Secretos ---
# Variables de entorno extra
env: 
  FLASK_ENV: "production"

# Si tienes un secreto creado manualmente (ej: sealed-secrets o external-secrets)
# pon el nombre aquí. La chart cargará todo el contenido como variables de entorno.
existingSecret: ""
